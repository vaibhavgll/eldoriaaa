<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eldoriaa Server - Whitelist Application</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <script src="players.js" defer></script>
    <style>
        /* --- General Styles & Minecraft Theme --- */
        body {
            background-image: url('https://www.minecraft.net/etc.clientlibs/minecraft/clientlibs/main/resources/img/bg-texture.png');
            background-color: #588734; background-repeat: repeat; font-family: 'Press Start 2P', cursive;
            color: #FFFFFF; text-shadow: 2px 2px 2px #333333; margin: 0; padding: 40px 20px;
            display: flex; justify-content: center; align-items: flex-start;
            min-height: 100vh; text-align: center;
        }
        .container { max-width: 800px; width: 100%; }
        h1 { font-size: 3em; color: #FFAA00; text-shadow: 3px 3px 0 #3E3E3E; margin-bottom: 0; }
        h2 { font-size: 1.8em; margin-top: 10px; }
        p { font-size: 1em; line-height: 1.5; max-width: 600px; margin: 20px auto; }

        /* --- NEW: Subtle Animations --- */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animated {
            opacity: 0; /* Start hidden */
            animation: fadeInUp 0.8s ease-out forwards;
        }
        /* Stagger the animations */
        h1.animated { animation-delay: 0.1s; }
        h2.animated { animation-delay: 0.2s; }
        p.animated { animation-delay: 0.3s; }
        .button-container.animated { animation-delay: 0.4s; }
        .player-list-section.animated { animation-delay: 0.5s; }

        /* --- Button Container --- */
        .button-container { display: flex; justify-content: center; gap: 20px; margin-top: 30px; flex-wrap: wrap; }
        .mc-button {
            font-family: 'Press Start 2P', cursive; font-size: 1.2em; color: #E0E0E0; background-color: #7D7D7D;
            border: 3px solid #373737; padding: 15px 30px; cursor: pointer;
            box-shadow: inset -4px -4px 0px 0px #585858, inset 4px 4px 0px 0px #A0A0A0;
            text-shadow: 2px 2px 0px #3E3E3E; transition: all 0.1s ease-in-out; text-decoration: none;
        }
        .mc-button:hover, .mc-button:focus { background-color: #8A8A8A; box-shadow: inset -5px -5px 0px 0px #585858, inset 5px 5px 0px 0px #A8A8A8; outline: none; }
        .mc-button:active { transform: translateY(2px); box-shadow: inset -2px -2px 0px 0px #585858, inset 2px 2px 0px 0px #A0A0A0; }

        /* --- Player List Styles --- */
        .player-list-section { margin-top: 60px; background-color: rgba(0, 0, 0, 0.2); padding: 20px; border: 4px solid #373737; box-shadow: inset 0 0 10px #000; }
        .player-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); gap: 15px; margin-top: 20px; }
        .player-card { display: flex; flex-direction: column; align-items: center; gap: 8px; }
        .player-card img { width: 64px; height: 64px; image-rendering: pixelated; border: 3px solid #585858; }
        .player-card p { font-size: 0.8em; margin: 0; line-height: 1.2; word-break: break-all; }

        /* --- Modal (Pop-up Box) Styles --- */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.7); backdrop-filter: blur(4px); padding-top: 20px; }
        .modal-content { background-color: #C6C6C6; margin: 5% auto; padding: 25px; border: 4px solid #585858; box-shadow: inset 0 0 0 4px #FFFFFF; width: 90%; max-width: 600px; position: relative; text-align: left; animation: fadeIn 0.3s; }
        .close-button { color: #E0E0E0; background-color: #C23333; border: 3px solid #373737; box-shadow: inset -2px -2px 0px 0px #8B2424, inset 2px 2px 0px 0px #E06464; position: absolute; top: 10px; right: 15px; font-size: 28px; font-weight: bold; width: 30px; height: 30px; line-height: 28px; text-align: center; cursor: pointer; }
        #whitelist-form label { display: block; margin: 15px 0 5px 0; color: #3E3E3E; font-size: 0.9em; text-shadow: none; }
        #whitelist-form input[type="text"], #whitelist-form textarea { width: calc(100% - 28px); padding: 10px; font-family: 'Press Start 2P', cursive; background-color: #8B8B8B; border: 4px solid #373737; box-shadow: inset 2px 2px 0px #585858; color: #FFFFFF; font-size: 0.8em; }
        #whitelist-form textarea { min-height: 80px; resize: vertical; }
        #whitelist-form input[type="text"]:focus, #whitelist-form textarea:focus { outline: none; border-color: #FFAA00; }
        .radio-group { display: flex; flex-wrap: wrap; gap: 10px; border: 4px solid #8B8B8B; background-color: #A0A0A0; padding: 10px; }
        .radio-group input[type="radio"] { display: none; }
        .radio-group label { margin: 0; padding: 10px; cursor: pointer; border: 3px solid #585858; background-color: #7D7D7D; color: #E0E0E0; flex-grow: 1; text-align: center; font-size: 0.8em; box-shadow: inset -2px -2px 0px 0px #585858, inset 2px 2px 0px 0px #A0A0A0; }
        .radio-group input[type="radio"]:checked + label { background-color: #58A758; border-color: #346434; box-shadow: inset -2px -2px 0px 0px #346434, inset 2px 2px 0px 0px #88D988; }
        .form-message { display: none; padding: 10px; margin-bottom: 15px; border: 3px solid #373737; font-size: 0.8em; text-shadow: 1px 1px #3E3E3E; text-align: center; }
        .success-message { background-color: #58A758; box-shadow: inset -2px -2px 0px 0px #346434, inset 2px 2px 0px 0px #88D988; color: #FFFFFF; }
        .error-message { background-color: #C23333; box-shadow: inset -2px -2px 0px 0px #8B2424, inset 2px 2px 0px 0px #E06464; color: #FFFFFF; }
        @media (max-width: 768px) { body { padding: 20px 10px; } h1 { font-size: 2.2em; } h2 { font-size: 1.5em; } p { font-size: 0.9em; } .button-container { flex-direction: column; align-items: center; gap: 15px; } .mc-button { font-size: 1em; width: 90%; max-width: 350px; } .modal-content { width: 95%; padding: 20px 15px; margin: 20px auto; } .player-list-section { padding: 15px; } .player-grid { grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 10px; } }
    </style>
</head>
<body>

    <div class="container">
        <!-- Add the "animated" class to elements you want to fade in -->
        <h1 class="animated">Eldoriaa Server</h1>
        <h2 class="animated">Whitelist Application</h2>
        <p class="animated">Ready to join the adventure? Fill out our application to get on the whitelist. We're excited to see you in-game!</p>
        
        <div class="button-container animated">
            <button id="open-modal-btn" class="mc-button">Apply For Whitelist</button>
            <a href="https://discord.gg/qBqTFWuShD" target="_blank" class="mc-button">Discord Server</a>
            <!-- NEW: Copy IP Button -->
            <button id="copy-ip-btn" class="mc-button">Copy Server IP</button>
        </div>

        <div class="player-list-section animated">
            <h2>Our Whitelisted Players</h2>
            <div id="player-grid-container" class="player-grid"></div>
        </div>
    </div>

    <!-- The Modal remains the same -->
    <div id="application-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 style="color: #3E3E3E; text-shadow: none; margin-top: 0; font-size: 1.5em;">Application Form</h2>
            <form id="whitelist-form">
                <label for="play-time">How long have you been playing Minecraft? *</label>
                <input type="text" id="play-time" name="play-time" required>
                <label>What type of a Player Are you? *</label>
                <div class="radio-group">
                    <input type="radio" id="player-builder" name="player-type" value="Builder" required><label for="player-builder">Builder</label>
                    <input type="radio" id="player-redstoner" name="player-type" value="Redstoner"><label for="player-redstoner">Redstoner</label>
                    <input type="radio" id="player-explorer" name="player-type" value="Explorer"><label for="player-explorer">Explorer</label>
                    <input type="radio" id="player-mix" name="player-type" value="A Lil Bit of this, A Lil Bit of that"><label for="player-mix">Mix</label>
                    <input type="radio" id="player-pvp" name="player-type" value="PvP"><label for="player-pvp">PvP</label>
                </div>
                <label for="mc-username">What's your Minecraft Username? *</label>
                <input type="text" id="mc-username" name="mc-username" required>
                <label for="discord-id">What is your Discord User ID? *</label>
                <input type="text" id="discord-id" name="discord-id" placeholder="e.g. 1201857644176871484" required>
                <label for="build-project">What's a decent build project you've made? *</label>
                <textarea id="build-project" name="build-project" required></textarea>
                <label for="server-activity">What do you usually like to do on servers? *</label>
                <textarea id="server-activity" name="server-activity" required></textarea>
                <label for="timezone">What is Your time zone in GMT? (e.g., GMT+5:30) *</label>
                <input type="text" id="timezone" name="timezone" required>
                <div id="form-message" class="form-message"></div>
                <button type="submit" class="mc-button" style="width: 100%; margin-top: 10px;">Submit Application</button>
            </form>
        </div>
    </div>
    
    <!-- NEW: Sound Effect Element -->
    <audio id="click-sound" src="https://www.myinstants.com/media/sounds/minecraft-click.mp3" preload="auto"></audio>

    <script>
        const webhookURL = "https://discord.com/api/webhooks/1182915455183233044/revXXoJdQMLH3CxnKfIpn_LkYeFM4sshMyxruRO8W9qbzB9vrHd9FA796zlT-bARJWES";
        const modal = document.getElementById("application-modal");
        const openBtn = document.getElementById("open-modal-btn");
        const closeBtn = document.querySelector(".close-button");
        const form = document.getElementById("whitelist-form");
        const messageEl = document.getElementById("form-message");

        // --- NEW: Sound Effect Logic ---
        const clickSound = document.getElementById('click-sound');
        // This includes all buttons on the page now, even the new ones
        document.querySelectorAll('.mc-button, .close-button').forEach(button => {
            button.addEventListener('mousedown', () => {
                clickSound.currentTime = 0; // Rewind to the start
                clickSound.volume = 0.5; // Lower volume a bit
                clickSound.play();
            });
        });
        
        // --- NEW: Copy IP Button Logic ---
        const copyIpBtn = document.getElementById('copy-ip-btn');
        const serverIP = 'play.eldoriaa.com'; // <-- IMPORTANT: SET YOUR SERVER IP HERE

        copyIpBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(serverIP).then(() => {
                const originalText = copyIpBtn.textContent;
                copyIpBtn.textContent = 'IP Copied!';
                copyIpBtn.style.backgroundColor = '#58A758'; // Green feedback
                setTimeout(() => {
                    copyIpBtn.textContent = originalText;
                    copyIpBtn.style.backgroundColor = ''; // Revert color
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy IP: ', err);
                const originalText = copyIpBtn.textContent;
                copyIpBtn.textContent = 'Error!';
                setTimeout(() => {
                    copyIpBtn.textContent = originalText;
                }, 2000);
            });
        });

        // --- Existing Logic (Unchanged) ---
        document.addEventListener('DOMContentLoaded', () => {
            const playerGrid = document.getElementById('player-grid-container');
            if (typeof whitelistedPlayers !== 'undefined' && whitelistedPlayers.length > 0) {
                whitelistedPlayers.forEach(playerName => {
                    const playerCard = document.createElement('div');
                    playerCard.className = 'player-card';
                    const playerAvatar = document.createElement('img');
                    playerAvatar.src = `https://minotar.net/helm/${playerName}/64.png`;
                    playerAvatar.alt = `${playerName}'s skin`;
                    const playerNameTag = document.createElement('p');
                    playerNameTag.textContent = playerName;
                    playerCard.appendChild(playerAvatar);
                    playerCard.appendChild(playerNameTag);
                    playerGrid.appendChild(playerCard);
                });
            } else {
                playerGrid.innerHTML = '<p>No players are currently whitelisted. Apply to be the first!</p>';
            }
        });

        openBtn.onclick = function() { modal.style.display = "block"; }
        closeBtn.onclick = function() { modal.style.display = "none"; }
        window.onclick = function(event) { if (event.target == modal) { modal.style.display = "none"; } }

        function showFormMessage(message, type) {
            messageEl.textContent = message;
            messageEl.className = 'form-message';
            messageEl.classList.add(type === 'success' ? 'success-message' : 'error-message');
            messageEl.style.display = 'block';
            setTimeout(() => { messageEl.style.display = 'none'; }, 5000);
        }

        async function getUUID(username) {
            try {
                const response = await fetch(`https://api.mojang.com/users/profiles/minecraft/${username}`);
                if (!response.ok) return "Username not found";
                const data = await response.json();
                return data.id.replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/, "$1-$2-$3-$4-$5");
            } catch (error) {
                console.error("Failed to fetch UUID:", error);
                return "Could not fetch UUID";
            }
        }

        form.addEventListener("submit", async function(event) {
            event.preventDefault();
            const submitButton = form.querySelector('button[type="submit"]');
            submitButton.textContent = "Sending...";
            submitButton.disabled = true;
            const formData = new FormData(form);
            const username = formData.get('mc-username');
            const discordId = formData.get('discord-id');
            const uuid = await getUUID(username);

            if (uuid === "Username not found") {
                showFormMessage(`Minecraft username "${username}" not found. Please check spelling.`, "error");
                submitButton.textContent = "Submit Application";
                submitButton.disabled = false;
                return;
            }

            const description = `<:user:1201857644176871484> **USERNAME:** \`${username}\`\nâ­ **UUID:** \`${uuid}\`\n\n\`[01]\` **Discord User ID:**\n> <@${discordId}>\n\n\`[02]\` **How long have you been playing Minecraft?**\n> ${formData.get('play-time') || "Not answered"}\n\n\`[03]\` **What type of a Player are you?**\n> ${formData.get('player-type') || "Not answered"}\n\n\`[04]\` **What's a decent build project you've made?**\n> ${formData.get('build-project') || "Not answered"}\n\n\`[05]\` **What do you usually like to do on servers?**\n> ${formData.get('server-activity') || "Not answered"}\n\n\`[06]\` **What is your time zone in GMT?**\n> ${formData.get('timezone') || "Not answered"}`.trim();
            const embed = { color: 5814783, author: { name: `New Application from ${username}`, icon_url: `https://minotar.net/avatar/${username}/64.png` }, thumbnail: { url: `https://minotar.net/helm/${username}/128.png` }, description: description, timestamp: new Date().toISOString(), footer: { text: "Eldoriaa Whitelist Bot" } };
            
            fetch(webhookURL, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ username: "Whitelist Applications", avatar_url: "https://i.imgur.com/kPMgS1g.png", embeds: [embed] }) })
            .then(response => {
                if (response.ok) {
                    showFormMessage("Application sent successfully!", "success");
                    setTimeout(() => { form.reset(); modal.style.display = "none"; }, 2000);
                } else {
                    showFormMessage(`Error: Server responded with status ${response.status}. Try again.`, "error");
                }
            })
            .catch(error => {
                console.error("Error:", error);
                showFormMessage("An unknown error occurred. Please try again later.", "error");
            })
            .finally(() => {
                if (messageEl.classList.contains('error-message')) {
                    submitButton.textContent = "Submit Application";
                    submitButton.disabled = false;
                }
            });
        });
    </script>
</body>
</html>

